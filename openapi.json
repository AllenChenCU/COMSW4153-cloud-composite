{
    "openapi": "3.1.0", 
    "info": {
        "title": "Composite Service", 
        "description": "Composite service for the accessible routes app", 
        "version": "1.0.0"
    } , 
    "servers": [
        {"url": "http://34.55.117.204:5001/", "description": "server on GCP Compute Engine"}
    ], 
    "paths": {
        "/query-routes-and-stations": {
            "get": {
                "summary": "Get all routes and stations equipments info", 
                "description": "Returns a dictionary with a routes field with all routes and a stations field with the status information of equipments of the corresponding stations in returned routes", 
                "parameters": [
                    {
                        "source": "starting address", 
                        "destination": "ending address"
                    }
                ], 
                "responses": {
                    "200": {
                        "description": "A JSON arrays of routes and stations", 
                        "content": {
                            "application/json": {
                                "schema": {"routes": "List", "stations": "List"}
                            }
                        }
                    }
                }
            }
        }, 
        "/save-route": {
            "post": {
                "summary": "save a route for a user into saved_route table", 
                "description": "generates a route_id and attaches it with the saved route and creates a record in the saved_route table. A notification record is also asynchronously saved into the email_notification table", 
                "parameters": [
                    {
                        "source": "starting address", 
                        "destination": "ending address", 
                        "user_id": "user id", 
                        "query_id": "query id", 
                        "route": "json or dict object of the route"
                    }
                ], 
                "responses": {
                    "201": {
                        "description": "the route is successfully saved into the saved_route and email_notification tables"
                    }
                }
            }
        }, 
        "/unsave-route": {
            "put": {
                "summary": "delete the saved route given the route_id", 
                "description": "delete the saved route associated with the route_id in the saved_route table and the notification record in the email notification table.", 
                "parameters": [
                    {
                        "route_id": "route id"
                    }
                ], 
                "responses": {
                    "200": {
                        "description": "the route is successfully deleted from the saved_route and email_notification tables"
                    }
                }
            }
        }, 
        "/get-saved-routes-and-stations": {
            "get": {
                "summary": "get all saved routes for the user", 
                "description": "queries the saved_route table to return all saved routes and station equipments info from all saved routes for the user.", 
                "parameters": [
                    {
                        "user_id": "user id"
                    }
                ], 
                "responses": {
                    "200": {
                        "description": "A JSON arrays of saved_routes and stations_from_saved_routes", 
                        "content": {
                            "application/json": {
                                "schema": {"saved_routes": "List", "stations_from_saved_routes": "List"}
                            }
                        }
                    }
                }
            }
        }
    }
}